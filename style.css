:root {
    --bg: #fdf2f4;
    --card-bg: rgba(255, 255, 255, 0.95);
    --accent: #d66d75;
    --accent-light: #ffb7c5;
    --text: #5a4a4a;
    --shadow: 0 15px 35px rgba(214, 109, 117, 0.15);
}

* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body {
    margin: 0;
    font-family: 'Segoe UI', system-ui, sans-serif;
    background: var(--bg);
    color: var(--text);
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden; 
    overscroll-behavior-y: contain;
}

/* Invisible Tap Zones */
.tap-zone {
    position: fixed;
    top: 0;
    height: 100vh;
    z-index: 200;
    cursor: pointer;
}
.tap-left { left: 0; width: 20%; }
.tap-right { right: 0; width: 80%; }

.bubbles {
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    z-index: -1;
    pointer-events: none;
}
.bubble, .heart-float {
    position: absolute;
    opacity: 0.3;
    animation: floatUp 15s infinite ease-in;
}
.bubble { background: var(--accent-light); border-radius: 50%; }
.heart-float { color: var(--accent); user-select: none; }

@keyframes floatUp {
    0% { transform: translateY(110vh) scale(0.5); opacity: 0; }
    20% { opacity: 0.4; }
    100% { transform: translateY(-20vh) scale(1.2); opacity: 0; }
}

.entry-photo {
    background: white;
    padding: 12px 12px 40px 12px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    transform: rotate(-3deg);
    margin-bottom: 30px;
    width: 220px;
}
.entry-photo img {
    width: 100%;
    aspect-ratio: 1;
    object-fit: cover;
    display: block;
}

.main-wrapper {
    position: relative;
    width: min(450px, 92vw);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10;
    touch-action: pan-y;
}

.slider-viewport {
    width: 100%;
    overflow: hidden;
    border-radius: 32px;
}

.slider-track {
    display: flex;
    transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
}

.bento-card {
    flex: 0 0 100%;
    backdrop-filter: blur(15px);
    padding: 40px 25px;
    height: 480px; 
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
}

.days-num { font-size: 4.5rem; font-weight: 800; color: var(--accent); margin: 5px 0; }
.section-title { text-transform: uppercase; letter-spacing: 2px; font-size: 0.75rem; opacity: 0.6; margin-bottom: 20px; font-weight: bold; }

.reason-box {
    background: white;
    padding: 30px;
    border-radius: 20px;
    min-height: 150px;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    box-shadow: inset 0 0 10px rgba(214, 109, 117, 0.05);
    border: 1px solid var(--bg);
}

/* New Next Chapter Polaroid Styles */
.next-chapter-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    width: 100%;
    padding: 10px;
}

.polaroid-small {
    background: white;
    padding: 8px 8px 30px 8px;
    box-shadow: 0 8px 15px rgba(0,0,0,0.1);
    transition: transform 0.3s ease;
    position: relative;
}

.polaroid-small img {
    width: 100%;
    aspect-ratio: 1;
    object-fit: cover;
    display: block;
}

.polaroid-small .caption {
    position: absolute;
    bottom: 5px;
    left: 0;
    right: 0;
    text-align: center;
    font-family: 'Comic Sans MS', cursive, sans-serif; /* Gives a handwritten feel */
    font-size: 0.7rem;
    color: #777;
}

/* Random rotations for a "scattered" look */
.polaroid-small:nth-child(odd) { transform: rotate(-3deg); }
.polaroid-small:nth-child(even) { transform: rotate(3deg); }
.polaroid-small:hover { transform: scale(1.05) rotate(0deg); z-index: 10; }

/* Typewriter Letter Styles */
.typewriter-container {
    background: #fdfcf0; /* Paper-like color */
    padding: 20px;
    border-radius: 8px;
    box-shadow: inset 0 0 15px rgba(0,0,0,0.05);
    width: 100%;
    height: 300px; /* Fixed height for auto-scrolling */
    overflow-y: auto; /* Allows scrolling */
    text-align: left;
    border: 1px solid #e0d8c3;
    scrollbar-width: none; /* Hide scrollbar for clean look */
}
.typewriter-container::-webkit-scrollbar { display: none; }

#typewriter-text {
    font-family: 'Courier New', Courier, monospace;
    font-size: 0.95rem;
    line-height: 1.6;
    color: #444;
    white-space: pre-wrap; /* Preserves line breaks from your text */
    margin: 0;
    justify-content: flex-start;
}

/* Flashing cursor */
#typewriter-text::after {
    content: '|';
    animation: blink 0.8s infinite;
    color: var(--accent);
    font-weight: bold;
}
@keyframes blink { 50% { opacity: 0; } }

/* Memory slider */
.polaroid-viewport {
    height: 320px;
    overflow: hidden;
    width: 100%;
    position: relative;
    mask-image: linear-gradient(to bottom, transparent, black 15%, black 85%, transparent);
}

.film-strip {
    display: flex;
    flex-direction: column;
    gap: 20px;
    align-items: center;
    animation: slideVertical 15s linear infinite;
}

.polaroid { 
    background: white; 
    padding: 8px 8px 20px 8px; 
    box-shadow: 0 5px 15px rgba(0,0,0,0.1); 
    transform: rotate(var(--r));
    width: 180px;
    flex-shrink: 0;
}

.polaroid img { 
    width: 100%; 
    aspect-ratio: 1; 
    object-fit: cover; 
    display: block;
}

@keyframes slideVertical {
    0% { transform: translateY(0); }
    100% { transform: translateY(calc(-50% - 10px)); }
}

#gate-overlay {
    position: fixed; inset: 0; background: var(--bg);
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    z-index: 1000;
}
.open-btn {
    background: var(--accent); color: white; border: none;
    padding: 16px 45px; border-radius: 50px; font-size: 1.1rem;
    cursor: pointer; font-weight: bold;
}

/* Bouquet Styles */
.bouquet-layout {
    position: relative;
    width: 100%;
    height: 420px;
    display: flex;
    justify-content: center;
    align-items: center;
}

.bouquet-polaroid {
    position: absolute;
    width: 120px;
    background: white;
    padding: 8px 8px 22px;
    box-shadow: 0 12px 25px rgba(0,0,0,0.12);
    border-radius: 2px;
    text-align: center;
    z-index: 1;
}

.bouquet-polaroid img {
    width: 100%;
    aspect-ratio: 1;
    object-fit: cover;
    display: block;
}

.bouquet-polaroid span {
    position: absolute;
    bottom: 4px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 12px;
    color: var(--accent);
}

.pos-tl { top: 140px; left: 5%; transform: rotate(-6deg); }
.pos-tr { top: 140px; right: 5%; transform: rotate(6deg); }
.pos-bl { bottom: 70px; left: 8%; transform: rotate(4deg); }
.pos-br { bottom: 70px; right: 8%; transform: rotate(-4deg); }

.blushing-bouquet {
    position: relative;
    z-index: 2;
}

/* Locked Letter */
.locked-card {
    background: #fdf2f4;
    border: 2px dashed var(--accent-light);
    border-radius: 20px;
    padding: 30px;
    width: 100%;
    transition: all 0.5s ease;
}

.password-input {
    width: 80%;
    padding: 12px;
    border: 1px solid var(--accent-light);
    border-radius: 25px;
    outline: none;
    text-align: center;
    margin-top: 15px;
    font-family: inherit;
}

.unlock-btn {
    background: var(--accent);
    color: white;
    border: none;
    padding: 10px 25px;
    border-radius: 20px;
    margin-top: 10px;
    cursor: pointer;
    font-weight: bold;
}

.secret-content {
    display: none; /* Hidden by default */
    animation: fadeIn 0.8s ease;
}

@keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-10px); }
    75% { transform: translateX(10px); }
}

.shake-effect {
    animation: shake 0.3s ease-in-out;
    border-color: #ff4d6d !important;
}
